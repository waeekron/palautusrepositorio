{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","props","onChange","search","PersonForm","onSubmit","addPerson","value","newName","handleNameChange","newNumber","handleNumberChange","type","Persons","personsToShow","handleRemove","map","person","name","number","onClick","id","Notification","message","succeeded","console","log","className","baseUrl","axios","get","then","response","data","newObject","post","delete","replacingObject","put","App","useState","persons","setPersons","setNewName","setNewNumber","filter","setFilter","setPersonsToShow","errorMessage","setErrorMessage","succes","setSucces","useEffect","personService","initialPersons","parseError","msg","split","event","target","trim","toLowerCase","startsWith","preventDefault","find","personObject","returnedPerson","concat","catch","error","setTimeout","window","confirm","changedPerson","deletedContact","removed","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2ebe044c.chunk.js","sourcesContent":["const Filter = (props) => {\r\n    return(\r\n        <div> filter shown with <input onChange={props.search}/> </div>\r\n    )\r\n}\r\n\r\nexport default Filter","const PersonForm = (props) => {\r\n   return(\r\n    <form onSubmit={props.addPerson}>\r\n        <div>\r\n        name  <input \r\n        value={props.newName}\r\n        onChange={props.handleNameChange} />\r\n        </div>\r\n        <div>\r\n        number <input \r\n        value={props.newNumber}\r\n        onChange={props.handleNumberChange}\r\n        />\r\n        </div>\r\n        <div>\r\n        <button type=\"submit\">add</button>\r\n        </div>\r\n    </form>   \r\n   )\r\n}\r\n    \r\n    \r\n\r\nexport default PersonForm","const Persons = ({personsToShow, handleRemove}) => {\r\n    return(\r\n        <div>\r\n            {personsToShow.map(\r\n                person => <p key={person.name}> {person.name} {person.number} \r\n                <button onClick={() => handleRemove(person.id)}>delete</button></p>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons","const Notification = ({message, succeeded}) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n    console.log(succeeded)\r\n    if (succeeded === true) {\r\n        return (\r\n            <div className=\"succes\">\r\n                {message}\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"error\">\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = replacingObject => {\r\n    const request = axios.put(`${baseUrl}/${replacingObject.id}`, replacingObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default {getAll, create, remove, update}\r\n","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\nimport personService from './services/persons'\n\nconst App = () => {\n\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber] = useState('')\n  const [ filter, setFilter ] = useState('')\n  const [personsToShow, setPersonsToShow] = useState(persons)\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [succes, setSucces] = useState(false)\n\n  //TODO: Muuta sovellusta siten, ettÃ¤ datan alkutila haetaan axios-kirjaston\n  // avulla palvelimelta. Hae data effect hookilla.\n  useEffect( () => {\n    console.log('effect')\n    personService.getAll().then(initialPersons => {\n      setPersons(initialPersons)\n      setPersonsToShow(initialPersons)\n    })\n  },[])\n\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const person = persons.find(person => person.name === newName.trim())\n    console.log(person)\n\n    if (typeof person !== 'undefined') {\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const changedPerson = {...person, number : newNumber}\n        personService\n          .update(changedPerson)\n            .then(returnedPerson => {\n              console.log('palautettu ',returnedPerson)\n              setPersons(persons.map(person => person.id !== returnedPerson.id ? person : returnedPerson))\n              setPersonsToShow(persons.map(person => person.id !== returnedPerson.id ? person : returnedPerson))\n              setNewName('')\n              setNewNumber('')\n\n              setErrorMessage(`Changed the number of ${changedPerson.name}`)\n              setSucces(true)\n              setTimeout(() => {\n                setErrorMessage(null)\n                setSucces(false)\n              }, 5000)\n            }).catch(error => {\n              setErrorMessage(`Information of ${changedPerson.name} has already been removed`)\n              setSucces(false)\n              setTimeout(() => {\n                setErrorMessage(null)\n                setSucces(true)\n              }, 5000)\n            }) \n            \n          }\n          return\n    } \n    console.log('here')\n    //ADDING A NEW PERSON\n    \n    const personObject = { \n      name: newName.trim(),\n      number: newNumber.trim()\n    }\n\n    personService\n      .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setPersonsToShow(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n\n          setSucces(true)\n          setErrorMessage(`Added ${personObject.name}`)\n          \n        })\n        .catch(error => {\n          if(error.response.data) {\n            console.log(error.response.data)\n            setSucces(false)\n            setErrorMessage(parseError(error.response.data))\n          }\n          \n        })\n        setTimeout(() => {\n          setErrorMessage(null)\n          setSucces(false)\n        }, 5000)\n        \n  }\n\n  const parseError = msg => {\n    let parts = msg.split('ValidationError:')\n    return parts[1].split('<br>')[0]\n  }\n\n  const search = (event) => {\n    if (event.target.value.trim() === '') {\n      setPersonsToShow(persons)\n      setFilter('')\n      return\n    }\n    setFilter(event.target.value.trim())\n    setPersonsToShow(persons.filter(person => person.name.toLowerCase().startsWith(filter)))\n  }\n\n  const remove = id => {\n    const deletedContact = persons.find(person => person.id === id)\n    if (window.confirm(`Are you sure you want to delete this contact`) ) {\n      console.log(id,'poistetaan')\n      const removed = personService.remove(id)\n      removed.then(removed => {\n        console.log(removed)\n        setPersons(persons.filter(person => person.id !== id))\n        setPersonsToShow(persons.filter(person => person.id !== id))\n\n        setSucces(true)\n        setErrorMessage(`Deleted ${deletedContact.name}`)\n        setTimeout(() => {\n          setErrorMessage(null)\n          setSucces(false)\n        }, 5000)  \n      }) \n    }\n  }   \n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} succeeded={succes} />\n      <Filter search={search}/>\n      <h2>add a new</h2>\n      <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange}\n                  newNumber={newNumber} handleNumberChange={handleNumberChange}/>\n      \n      <h2>Numbers</h2>\n      <Persons personsToShow={personsToShow} handleRemove={remove}/>\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}